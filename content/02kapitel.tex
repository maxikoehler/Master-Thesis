%!TEX root = ../main.tex

% \part{Modeling in Python}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Transformer Equipment Modeling}

Some literature and fundamentals about transformers, control, stability assessment, fast-switching modules, and analysis in Python.

\begin{figure}[H]
        \centering
        \vspace{1cm}
        \begin{circuitikz}[european, scale=.9, smallR/.style={resistor,resistors/scale=.7}]
                \draw (0,0) node[oscillator, anchor=east, name=gen]{} --(.5,0)
                to[L, name=X_g] ++(2,0) coordinate(f1)
                % \bushere{1}{$\underline{E}_\mathrm{T}'$}{}
                % to[oosourcetrans,prim=delta,sec=wye] ++(2,0)
                \bushere{2}{$\underline{V}_\mathrm{bb}$}{\acs{SG} bus bar} coordinate(b1) ++(0,-1) -- ++(.25,0) -- coordinate(f2) ++(1.75,0)
                to[L, name=X_l3] ++(1,0) -- ++(1.5,0) ++(0,1)
                \bushere{2}{$E_\mathrm{ibb}~\angle~0^{\circ}$}{\acs{IBB}} ++(0,1) coordinate(b2) ++(0,-1) coordinate(b3) -- ++(.75,0) coordinate(f3) -- ++(.75,0) to[L, name=X_ibb] ++(1,0) -- ++(1,0)
                node[gridnode, anchor=left, name=ib]{};

                % draw other resistances
                \draw (b1) ++(0,1) -- ++(.5,0) to[L, name=X_l1] (b2);
                \draw (b1) -- ++(.5,0) to[L, name=X_l2] (b3);
                % \draw[line width=2pt] (2.25,1) -- (2.25,-1);
                % \draw[line width=2pt] (4.75,1) -- (4.75,-1);
                % \draw[line width=2pt] (8.25,1) -- (8.25,-1);

                % labels for the resistors
                \node[above=6pt] at (X_g) {$X_\mathrm{g}'$};
                \node[above=6pt] at (X_ibb) {$X_\mathrm{ibb}$};
                \node[above=6pt] at (X_l1) {$3~X_\mathrm{l}$};
                % \node[below=6pt] at (X_l2) {$X_\mathrm{l}$};
                % \node[below=6pt] at (X_l3) {$X_\mathrm{l}$};

                % pole voltages and angles
                \path[->] (-1.2,.5) edge [bend right] node[left=6pt]{$E_\mathrm{p}~\angle~\delta$} (-1.2,-.5);
                % \path[->] (ib) ++(.8,.5) edge [bend left] node[right=6pt]{$E_\mathrm{ibb}~\angle~0^{\circ}$} ++(0,-1);

                % faults
                % \draw[-Stealth, very thick, red] (f1) ++(0,-.5) -- ++(-.15,-.45) -- ++(.3,.2) -- ++(-.2,-.6) coordinate(f1_text);
                % \node[below, red] at (f1_text) {\scriptsize fault 1};
                \draw[-Stealth, very thick, red] (f2) ++(0,.3) -- ++(-.15,-.45) -- ++(.3,.2) -- ++(-.2,-.6) coordinate(f2_text);
                \node[below, red, align=center] at (f2_text) {\scriptsize fault 2/3};
                \draw[-Stealth, very thick, red] (f3) ++(0,.3) -- ++(-.15,-.45) -- ++(.3,.2) -- ++(-.2,-.6) coordinate(f3_text);
                \node[below, red] at (f3_text) {\scriptsize fault 1};
        \end{circuitikz}
        \vspace{.5cm}
        \caption[Representative circuit of a \acf{SMIB} model]{Representative circuit of a \acf{SMIB} model with pole wheel voltage $E_\mathrm{p}~\angle~\delta$ and \acf{IBB} voltage $E_\mathrm{ibb}~\angle~0^{\circ}$; positions of considered faults 1 to 3 are marked with red lightning arrows}
        \label{fig:smib-model}
\end{figure}

\begin{figure}[h]
        \centering
        \begin{tikzpicture}[node distance = 1.5cm, auto]
                % Place nodes
                \node [papStart] (start) {start};
                \node [papProcess, below of = start, yshift= -2mm] (pro1){initialize start and simulation parameters};
                \node [papPredProc, below of = pro1, yshift= -5mm] (pro2){\nodepart{two} \shortstack{do \acs{TDS} with\\constant fault}};
                \node [papProcess, below of = pro2, yshift= -5mm] (pro3){determine \acs{CCT} and critical angle};
                \node [papPredProc, below of = pro3, yshift= -7mm](pro4){\nodepart{two}\shortstack{solving \acs{TDS}\\stable and unstable}};
                \node [papProcess, below of = pro4, yshift= -5mm](pro5){plot results};
                \node [papEnd, below of = pro5, yshift= -2mm] (end) {end};

                \node [right of = pro4, xshift=25mm] (iter) {\footnotesize\itshape{iterate 1x}};
                \node [right of = pro1, xshift=25mm] () {\footnotesize\itshape{init()}};
                \node [right of = pro2, xshift=25mm] () {\footnotesize\itshape{odeint()}};
                \node [right of = pro3, xshift=25mm] () {\footnotesize\itshape{determine\_cct()}};

                % Place joins
                \coordinate [above = of pro4, yshift= -9mm] (join1);
                \coordinate [below of = pro4, yshift= 5mm] (join2);

                % Draw edges
                \path [papLine] (start) -- (pro1);
                \path [papLine] (pro1) -- (pro2);
                \path [papLine] (pro2) -- (pro3);
                \path [papLine] (pro3) -- (pro4);
                \path [papLine] (pro4) -- (pro5);
                \path [papLine] (pro5) -- (end);
                \path [papLine] (join2) -| (iter);
                \path [papLine] (iter) |- (join1);
                % \path [papLine] (dec1) -- node [above] {\papNo} (predproc1);
                % \path [papLine] (predproc1) -- (pro3);
                % \path [papLine] (pro3) |- (join1);
        \end{tikzpicture}
        \caption[Program plan proposal for determining the \acf{CCT}]{Program plan proposal for determining the \acf{CCT} $t_\mathrm{cc}$, critical power angle $\delta_\mathrm{cc}$ and the \acf{TDS} of the \acf{SMIB}-model; including the associated main function name}
        \label{fig:program-plan}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Tap Changer Control Modeling}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Simulative comparison of Continous and Discrete Control Methods}